有事可以微信公众号（王大粘之又甜又粘）留言：clingywang
# 交易系统使用指南

## 🚀 快速启动

### 启动方式

**方式一：桌面快捷方式（推荐）**
- 双击桌面上的 **"一键启动交易系统"** 快捷方式
- 系统会自动启动所有组件

**方式二：手动启动**
1. 打开安装目录（默认：`C:\Program Files\Automated Trading System`）
2. 双击 `start_manual.bat`

---

## 📋 启动后的操作流程

### 第一步：确认 MT5 已登录
- 确保 MetaTrader 5 已经打开
- 已经登录模拟账户或真实账户
- 图表窗口已打开

### 第二步：等待系统初始化
- 启动后会自动：
  - 连接 MT5
  - 连接 Ollama AI
  - 加载配置文件
  - 校准按钮位置

### 第三步：通过 Web 界面查看状态
- 打开浏览器访问：`http://localhost:5000`
- 可以查看：
  - 当前持仓
  - 信号状态
  - AI 决策日志

---

## 🎛️ Web 界面功能

### 主页 (/)
- 显示系统状态
- 实时显示持仓信息
- 显示 AI 最新决策

### 主要功能区

| 功能 | 说明 |
|------|------|
| 持仓查看 | 显示当前所有持仓 |
| 信号日志 | 显示 AI 生成的交易信号 |
| 系统状态 | 显示 MT5/Ollama 连接状态 |

---

## ⚙️ 配置说明

### 配置文件位置
- 安装目录下的 `config.json`

### 关键配置项

```json
{
  "mt5_login": "123456",        // MT5 账户ID
  "mt5_password": "yourpass",   // MT5 密码
  "mt5_server": "Broker-Server", // 经纪商服务器
  "ollama_url": "http://localhost:11434", // Ollama 地址
  "model": "llama3",            // 使用的 AI 模型
  "max_trades": 3,             // 最大同时交易数
  "risk_level": "medium"       // 风险等级: low/medium/high
}
```

### 修改配置
1. 停止系统（关闭命令行窗口）
2. 用记事本打开 `config.json`
3. 修改对应参数
4. 保存文件
5. 重新启动系统

---

## 🔧 常见操作

### 查看当前持仓
- MT5 终端 → "工具" → "历史持仓"
- 或 Web 界面实时查看

### 手动平仓
1. 在 MT5 中右键点击持仓
2. 选择"平仓"
3. 确认平仓

### 停止系统
- 关闭命令行窗口
- 或按 `Ctrl + C` 在命令行中停止

### 查看日志
- Web 界面有实时日志
- 或查看 `logs` 文件夹（如果存在）

---

## ⚠️ 注意事项

### 安全提示
1. **首次使用建议使用模拟账户**
2. **设置合理的止损止盈**
3. **不要将真实账户密码明文保存** - 测试完成后修改密码
4. **建议先在小资金账户测试**

### 运行要求
1. **MT5 必须保持登录状态**
2. **Ollama 必须保持运行**
3. **网络连接稳定**
4. **电脑不要休眠或关机**

### 风险控制
- 设置 max_trades 限制同时开仓数量
- 设置 risk_level 控制每单风险
- 建议设置止损 (Stop Loss)

---

## 🔍 故障排除

### MT5 连接失败
**症状**：Web 界面显示 MT5 未连接

**解决方法**：
1. 检查 MT5 是否已打开
2. 检查是否已登录账户
3. 检查 config.json 中的 mt5_server 是否正确
4. 重启 MT5 和交易系统

### Ollama 连接失败
**症状**：Web 界面显示 AI 未连接

**解决方法**：
1. 确保 Ollama 正在运行（系统托盘）
2. 检查 config.json 中的 ollama_url
3. 浏览器访问 http://localhost:11434 测试
4. 确保模型已下载：`ollama list`

### 窗口未找到
**症状**：报错 "按钮位置未找到"

**解决方法**：
1. 确保 MT5 窗口标题正确
2. 重新校准按钮位置（修改 mt5_positions.json）
3. 确保 MT5 窗口在前台

### 反应缓慢
**原因**：AI 模型太大或电脑配置不足

**解决方法**：
1. 使用更小的模型（如 mistral 而非 llama3）
2. 关闭不必要的程序
3. 增加电脑内存

---

## 📊 监控建议

### 日常监控
- 定期查看 Web 界面状态
- 检查持仓和盈亏
- 关注新闻事件（AI 决策可能受影响）

### 紧急情况处理
1. 网络断开 → 检查网络，重启系统
2. MT5 卡死 → 重启 MT5
3. 异常交易 → 立即手动平仓

---

## 📞 获取帮助

如果遇到问题，请检查：
1. ✅ 所有前置软件是否正常运行
2. ✅ config.json 配置是否正确
3. ✅ 网络连接是否稳定
4. ✅ 查看 Web 界面的错误信息

---

*祝您交易顺利！*
